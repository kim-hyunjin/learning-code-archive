# WebRTC Example

이 예제는 WebRTC(Web Real-Time Communication)를 사용하여 브라우저 간 직접 통신을 구현한 간단한 애플리케이션입니다. 비디오 통화와 텍스트 채팅 기능을 포함하고 있습니다.

## WebRTC란?

WebRTC는 웹 브라우저 간에 플러그인이나 추가 소프트웨어 없이 실시간 통신을 가능하게 하는 기술입니다. 주요 특징:

- 브라우저 간 P2P(Peer-to-Peer) 연결
- 오디오 및 비디오 스트리밍
- 데이터 채널을 통한 텍스트 및 파일 공유
- 낮은 지연 시간의 실시간 통신

## 기술 스택

- **프론트엔드**: HTML, CSS, JavaScript, WebRTC API
- **백엔드**: Node.js, Express
- **시그널링 서버**: Socket.IO

## 주요 기능

- 방 생성 및 참여
- 다중 참여자 P2P 비디오 통화 (2명 이상 지원)
- 오디오 음소거 및 비디오 끄기 기능
- 데이터 채널을 통한 그룹 실시간 채팅

## 설치 방법

1. 저장소를 클론하거나 다운로드합니다.
2. 프로젝트 디렉토리로 이동합니다:
   ```
   cd webrtc-example
   ```
3. 필요한 패키지를 설치합니다:
   ```
   npm install
   ```

## 실행 방법

1. 서버를 시작합니다:
   ```
   npm start
   ```
2. 웹 브라우저에서 다음 주소로 접속합니다:
   ```
   http://localhost:3000
   ```

## 사용 방법

1. 첫 번째 브라우저에서 방 ID를 입력하거나 비워두고 "Create Room" 버튼을 클릭합니다.
2. 생성된 방 ID를 확인합니다.
3. 다른 브라우저나 기기에서 같은 주소로 접속한 후, 첫 번째 브라우저에서 생성된 방 ID를 입력하고 "Join Room" 버튼을 클릭합니다.
4. 브라우저 간에 연결이 설정되면 비디오 통화가 시작됩니다.
5. 추가 참여자들도 같은 방 ID를 사용하여 참여할 수 있으며, 모든 참여자는 서로의 비디오를 볼 수 있습니다.
6. 하단의 채팅 창을 통해 모든 참여자와 텍스트 메시지를 주고받을 수 있습니다.
7. 참여자가 방을 떠나면 해당 참여자의 비디오만 제거되고 나머지 참여자들은 계속 통화할 수 있습니다.

## WebRTC 작동 원리

WebRTC 연결은 다음과 같은 단계로 이루어집니다:

1. **시그널링(Signaling)**: 피어들이 서로를 찾고 연결하기 위한 정보를 교환합니다. 이 예제에서는 Socket.IO를 사용하여 시그널링 서버를 구현했습니다.

2. **ICE(Interactive Connectivity Establishment)**: 네트워크 연결을 설정하기 위한 프레임워크입니다. STUN 및 TURN 서버를 사용하여 NAT 및 방화벽을 통과할 수 있습니다.

3. **SDP(Session Description Protocol)**: 미디어 형식, 코덱, 연결 정보 등을 포함하는 메타데이터입니다. Offer와 Answer 형태로 교환됩니다.

4. **P2P 연결**: 시그널링이 완료되면 피어 간에 직접 연결이 설정되고, 미디어 스트림과 데이터가 교환됩니다.

5. **메시 네트워크(Mesh Network)**: 다중 참여자 환경에서는 각 참여자가 다른 모든 참여자와 직접 P2P 연결을 맺는 메시 토폴로지를 사용합니다. 예를 들어, 3명의 참여자가 있다면 총 3개의 P2P 연결이 형성됩니다(A-B, A-C, B-C).

## 주의사항

- 이 예제는 로컬 네트워크에서 잘 작동하지만, 인터넷을 통한 연결에는 TURN 서버가 필요할 수 있습니다.
- 보안을 위해 실제 프로덕션 환경에서는 HTTPS를 사용해야 합니다.
- 브라우저 호환성: 최신 버전의 Chrome, Firefox, Safari, Edge에서 지원됩니다.
- 메시 네트워크 방식은 참여자 수가 많아질수록 각 클라이언트의 대역폭과 CPU 사용량이 증가합니다. 대규모 화상 회의의 경우 SFU(Selective Forwarding Unit) 또는 MCU(Multipoint Control Unit) 아키텍처를 고려해야 합니다.
- 일반적으로 4-5명 이상의 참여자가 있는 경우 성능이 저하될 수 있습니다.

## 참고 자료

- [WebRTC API - MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API)
- [WebRTC 공식 사이트](https://webrtc.org/)
- [Socket.IO 문서](https://socket.io/docs/)